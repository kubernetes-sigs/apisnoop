<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-08-21 Wed 01:25 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>APISnoop Update for 19 August 2019</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="ii team" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="aesthetic/main.css" />
<link href="https://fonts.googleapis.com/css?family=Fira+Sans:300,300i,400,400i,700" rel="stylesheet">
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">APISnoop Update for 19 August 2019</h1>

<div id="outline-container-orgc730589" class="outline-2">
<h2 id="orgc730589">Summary</h2>
<div class="outline-text-2" id="text-orgc730589">
<p>
The APISnoop team are working to expand how much one can know about field usage and coverage in Kubernetes.  Our initial question was “What is the state of testing coverage for every field related to PodSpec?” This question required us to first discover which fields actually relate to PodSpec and in what configuration, and how to correlate the data within Audit Log events to the corresponding fields and definitions within the swagger.json.
</p>

<p>
Our work to answer this question is helping to answer the larger questions like, &ldquo;what is the testing coverage for every field?   “Or for any arbitrary kind, what fields relate to it and what are their coverage?”
</p>

<p>
The APISnoop team are working to expand how much we know, or can know, about field usage and coverage in Kubernetes.  Our initial question to answer was: “What is the state of testing coverage for every field related to PodSpec”. This question required us to first discover which fields actually relate to PodSpec and in what configuration, and how to correlate the data within Audit Log events to the corresponding fields and definitions within the swagger.json.
</p>

<p>
We are working within a new infrastructure for APISnoop, where we load audit events and swaggers directly into a Postgres database, and then build out our queries from this raw data.  This allows us to query the data from multiple sources, including this report: all tables listed below are coming directly from our server, by running queries dynamically as we type this report.
</p>
</div>
</div>
<div id="outline-container-org34818cd" class="outline-2">
<h2 id="org34818cd">PodSpec Field Coverage</h2>
<div class="outline-text-2" id="text-org34818cd">
<p>
Initially we explored podspec coverage by giving a report on each field related to podspec and its relative hits, test hits, and conformance test hits.  We did this by manually walking the podspec tree to get all relevant fields, then building out a custom view.
</p>

<div class="org-src-container">
<pre class="src src-sql-mode" id="orgc19a44b"><span style="color: #268bd2; font-weight: bold;">select</span> * <span style="color: #268bd2; font-weight: bold;">from</span> podspec_field_summary;
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> PodSpec Field Coverage</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">podspec_field</th>
<th scope="col" class="org-right">other_hits</th>
<th scope="col" class="org-right">e2e_hits</th>
<th scope="col" class="org-right">conf_hits</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">ephemeralContainers</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">overhead</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">preemptionPolicy</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">shareProcessNamespace</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">topologySpreadConstraints</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">readinessGates</td>
<td class="org-right">0</td>
<td class="org-right">8</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">dnsConfig</td>
<td class="org-right">0</td>
<td class="org-right">16</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">hostIPC</td>
<td class="org-right">0</td>
<td class="org-right">16</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">hostPID</td>
<td class="org-right">0</td>
<td class="org-right">16</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">priorityClassName</td>
<td class="org-right">3731</td>
<td class="org-right">32</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">runtimeClassName</td>
<td class="org-right">0</td>
<td class="org-right">36</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">affinity</td>
<td class="org-right">1213</td>
<td class="org-right">43</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">hostAliases</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">8</td>
</tr>

<tr>
<td class="org-left">imagePullSecrets</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">8</td>
</tr>

<tr>
<td class="org-left">activeDeadlineSeconds</td>
<td class="org-right">18</td>
<td class="org-right">8</td>
<td class="org-right">14</td>
</tr>

<tr>
<td class="org-left">initContainers</td>
<td class="org-right">0</td>
<td class="org-right">1315</td>
<td class="org-right">32</td>
</tr>

<tr>
<td class="org-left">hostNetwork</td>
<td class="org-right">2687</td>
<td class="org-right">1574</td>
<td class="org-right">41</td>
</tr>

<tr>
<td class="org-left">automountServiceAccountToken</td>
<td class="org-right">0</td>
<td class="org-right">36</td>
<td class="org-right">60</td>
</tr>

<tr>
<td class="org-left">subdomain</td>
<td class="org-right">5253</td>
<td class="org-right">85</td>
<td class="org-right">60</td>
</tr>

<tr>
<td class="org-left">hostname</td>
<td class="org-right">5469</td>
<td class="org-right">85</td>
<td class="org-right">60</td>
</tr>

<tr>
<td class="org-left">priority</td>
<td class="org-right">900</td>
<td class="org-right">83</td>
<td class="org-right">105</td>
</tr>

<tr>
<td class="org-left">tolerations</td>
<td class="org-right">4820</td>
<td class="org-right">83</td>
<td class="org-right">105</td>
</tr>

<tr>
<td class="org-left">nodeName</td>
<td class="org-right">8379</td>
<td class="org-right">4170</td>
<td class="org-right">127</td>
</tr>

<tr>
<td class="org-left">nodeSelector</td>
<td class="org-right">3260</td>
<td class="org-right">257</td>
<td class="org-right">128</td>
</tr>

<tr>
<td class="org-left">serviceAccount</td>
<td class="org-right">12025</td>
<td class="org-right">1199</td>
<td class="org-right">201</td>
</tr>

<tr>
<td class="org-left">serviceAccountName</td>
<td class="org-right">12025</td>
<td class="org-right">1199</td>
<td class="org-right">201</td>
</tr>

<tr>
<td class="org-left">volumes</td>
<td class="org-right">15598</td>
<td class="org-right">6903</td>
<td class="org-right">876</td>
</tr>

<tr>
<td class="org-left">enableServiceLinks</td>
<td class="org-right">12097</td>
<td class="org-right">6506</td>
<td class="org-right">1741</td>
</tr>

<tr>
<td class="org-left">containers</td>
<td class="org-right">27717</td>
<td class="org-right">13194</td>
<td class="org-right">2063</td>
</tr>

<tr>
<td class="org-left">dnsPolicy</td>
<td class="org-right">27717</td>
<td class="org-right">13194</td>
<td class="org-right">2063</td>
</tr>

<tr>
<td class="org-left">restartPolicy</td>
<td class="org-right">27717</td>
<td class="org-right">13194</td>
<td class="org-right">2063</td>
</tr>

<tr>
<td class="org-left">schedulerName</td>
<td class="org-right">27717</td>
<td class="org-right">13194</td>
<td class="org-right">2063</td>
</tr>

<tr>
<td class="org-left">securityContext</td>
<td class="org-right">27717</td>
<td class="org-right">13194</td>
<td class="org-right">2063</td>
</tr>

<tr>
<td class="org-left">terminationGracePeriodSeconds</td>
<td class="org-right">27717</td>
<td class="org-right">13194</td>
<td class="org-right">2063</td>
</tr>
</tbody>
</table>

<p>
This was a useful summary, but immediately begged new questions: what&rsquo;s the coverage for all the fields within something like containers?  Can we see this not as a summary, but as a granular walk through each field and sub-field and see each of their coverage?
</p>

<p>
To answer these, we&rsquo;d need to make a generalized query that walked the path of any kind, noting every field and sub-field and the path to each.
</p>
</div>
</div>
<div id="outline-container-org3bd552d" class="outline-2">
<h2 id="org3bd552d">Recursive Querying of Kubernetes Schemas</h2>
<div class="outline-text-2" id="text-org3bd552d">
<p>
We achieved this using a recursive view that starts from a swagger.json defition of a kind, then walks through each of its fields, finding any that reference their own schema and then branching out to walk down each of these paths.  
</p>

<p>
This allows us to now see every field within the swagger.json, the kind it relates to, and any sub-kinds that come from it.  
This clarity into kinds will help in multiple ways.  By connecting this work to our audit logs, we can start to see coverage field by field, based on any spec or kind we wished.  We can then see exactly which areas are untested, their importance as related to our kind definitions, and write out tests with better focus and priority.
</p>

<p>
To better illustrate this, we can look at some sample queries.
</p>
</div>
</div>
<div id="outline-container-org585f4f8" class="outline-2">
<h2 id="org585f4f8">Sample Queries</h2>
<div class="outline-text-2" id="text-org585f4f8">
</div>
<div id="outline-container-orgb34c3c3" class="outline-3">
<h3 id="orgb34c3c3">A listing of fields related to Podspec</h3>
<div class="outline-text-3" id="text-orgb34c3c3">
<p>
We can walk up or down a tree for any arbitrary kind, like podspec. 
</p>

<p>
We can start at the PodSpec kind and see the fields within.
</p>
<div class="org-src-container">
<pre class="src src-sql-mode" id="org7d7cfe5"><span style="color: #268bd2; font-weight: bold;">select</span> * <span style="color: #268bd2; font-weight: bold;">from</span> kind_field_path
<span style="color: #268bd2; font-weight: bold;">where</span> field_kind <span style="color: #268bd2; font-weight: bold;">not</span> <span style="color: #268bd2; font-weight: bold;">like</span> <span style="color: #2aa198;">'io%'</span> <span style="color: #008787; background-color: #262626;">-- only look at int and string</span>
<span style="color: #268bd2; font-weight: bold;">and</span> kind <span style="color: #268bd2; font-weight: bold;">like</span> <span style="color: #2aa198;">'%PodSpec'</span>
<span style="color: #268bd2; font-weight: bold;">and</span> field_path <span style="color: #268bd2; font-weight: bold;">like</span> <span style="color: #2aa198;">'%.%'</span>
<span style="color: #268bd2; font-weight: bold;">limit</span> <span style="color: #d75fd7;">20</span>;
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> Fields Within PodSpec</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">kind</th>
<th scope="col" class="org-left">field_path</th>
<th scope="col" class="org-left">field_kind</th>
<th scope="col" class="org-left">field_type</th>
<th scope="col" class="org-left">sub_kind</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">containers.command</td>
<td class="org-left">string</td>
<td class="org-left">array</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">containers.terminationMessagePath</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">containers.tty</td>
<td class="org-left">integer</td>
<td class="org-left">boolean</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">containers.args</td>
<td class="org-left">string</td>
<td class="org-left">array</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">containers.image</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">containers.stdinOnce</td>
<td class="org-left">integer</td>
<td class="org-left">boolean</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">containers.name</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">containers.workingDir</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">containers.imagePullPolicy</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">containers.terminationMessagePolicy</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">containers.stdin</td>
<td class="org-left">integer</td>
<td class="org-left">boolean</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">initContainers.command</td>
<td class="org-left">string</td>
<td class="org-left">array</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">initContainers.terminationMessagePath</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">initContainers.tty</td>
<td class="org-left">integer</td>
<td class="org-left">boolean</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">initContainers.args</td>
<td class="org-left">string</td>
<td class="org-left">array</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">initContainers.image</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">initContainers.stdinOnce</td>
<td class="org-left">integer</td>
<td class="org-left">boolean</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">initContainers.name</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">initContainers.workingDir</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
<td class="org-left">initContainers.imagePullPolicy</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.Container</td>
</tr>
</tbody>
</table>

<p>
Or we can go in the other direction, and see a sampling of fields that contain podspec.
</p>

<div class="org-src-container">
<pre class="src src-sql-mode" id="org5dbb7cc"><span style="color: #268bd2; font-weight: bold;">select</span> * <span style="color: #268bd2; font-weight: bold;">from</span> kind_field_path
<span style="color: #268bd2; font-weight: bold;">where</span> field_kind <span style="color: #268bd2; font-weight: bold;">not</span> <span style="color: #268bd2; font-weight: bold;">like</span> <span style="color: #2aa198;">'io%'</span> <span style="color: #008787; background-color: #262626;">-- only look at int and string</span>
<span style="color: #268bd2; font-weight: bold;">and</span> sub_kind <span style="color: #268bd2; font-weight: bold;">like</span> <span style="color: #2aa198;">'%PodSpec'</span>
<span style="color: #268bd2; font-weight: bold;">and</span> field_path <span style="color: #268bd2; font-weight: bold;">like</span> <span style="color: #2aa198;">'%.%'</span>
<span style="color: #268bd2; font-weight: bold;">limit</span> <span style="color: #d75fd7;">20</span>;
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 3:</span> Fields that Contain Podspec</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">kind</th>
<th scope="col" class="org-left">field_path</th>
<th scope="col" class="org-left">field_kind</th>
<th scope="col" class="org-left">field_type</th>
<th scope="col" class="org-left">sub_kind</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.hostPID</td>
<td class="org-left">integer</td>
<td class="org-left">boolean</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.hostIPC</td>
<td class="org-left">integer</td>
<td class="org-left">boolean</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.hostname</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.nodeName</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.overhead</td>
<td class="org-left">integer</td>
<td class="org-left">object</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.priority</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.dnsPolicy</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.subdomain</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.hostNetwork</td>
<td class="org-left">integer</td>
<td class="org-left">boolean</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.nodeSelector</td>
<td class="org-left">integer</td>
<td class="org-left">object</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.restartPolicy</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.schedulerName</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.serviceAccount</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.preemptionPolicy</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.runtimeClassName</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.priorityClassName</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.enableServiceLinks</td>
<td class="org-left">integer</td>
<td class="org-left">boolean</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.serviceAccountName</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.activeDeadlineSeconds</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.PodTemplateSpec</td>
<td class="org-left">spec.shareProcessNamespace</td>
<td class="org-left">integer</td>
<td class="org-left">boolean</td>
<td class="org-left">io.k8s.api.core.v1.PodSpec</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org201e8b2" class="outline-3">
<h3 id="org201e8b2">A sampling of  subresources for Container</h3>
<div class="outline-text-3" id="text-org201e8b2">
<p>
Our initial summary made us curious to see all the sub-resources for any of the fields of podspec.  Here is a sampling for container.
</p>

<div class="org-src-container">
<pre class="src src-sql-mode" id="orgae8c8df"><span style="color: #268bd2; font-weight: bold;">select</span> * <span style="color: #268bd2; font-weight: bold;">from</span> kind_field_path
<span style="color: #268bd2; font-weight: bold;">where</span> field_kind <span style="color: #268bd2; font-weight: bold;">not</span> <span style="color: #268bd2; font-weight: bold;">like</span> <span style="color: #2aa198;">'io%'</span> <span style="color: #008787; background-color: #262626;">-- only look at int and string</span>
<span style="color: #268bd2; font-weight: bold;">and</span> kind <span style="color: #268bd2; font-weight: bold;">like</span> <span style="color: #2aa198;">'%v1.Container'</span>
<span style="color: #268bd2; font-weight: bold;">and</span> field_path <span style="color: #268bd2; font-weight: bold;">like</span> <span style="color: #2aa198;">'%.%'</span>
<span style="color: #268bd2; font-weight: bold;">limit</span> <span style="color: #d75fd7;">20</span>;
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 4:</span> Sub-resources for the kind Container</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">kind</th>
<th scope="col" class="org-left">field_path</th>
<th scope="col" class="org-left">field_kind</th>
<th scope="col" class="org-left">field_type</th>
<th scope="col" class="org-left">sub_kind</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">ports.name</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.ContainerPort</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">ports.hostIP</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.ContainerPort</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">ports.hostPort</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.ContainerPort</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">ports.protocol</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.ContainerPort</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">ports.containerPort</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.ContainerPort</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">envFrom.prefix</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.EnvFromSource</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">env.value</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.EnvVar</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">env.name</td>
<td class="org-left">string</td>
<td class="org-left">string</td>
<td class="org-left">io.k8s.api.core.v1.EnvVar</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">readinessProbe.successThreshold</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.Probe</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">readinessProbe.periodSeconds</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.Probe</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">readinessProbe.initialDelaySeconds</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.Probe</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">readinessProbe.timeoutSeconds</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.Probe</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">readinessProbe.failureThreshold</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.Probe</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">livenessProbe.successThreshold</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.Probe</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">livenessProbe.periodSeconds</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.Probe</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">livenessProbe.initialDelaySeconds</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.Probe</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">livenessProbe.timeoutSeconds</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.Probe</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">livenessProbe.failureThreshold</td>
<td class="org-left">integer</td>
<td class="org-left">integer</td>
<td class="org-left">io.k8s.api.core.v1.Probe</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">resources.limits</td>
<td class="org-left">integer</td>
<td class="org-left">object</td>
<td class="org-left">io.k8s.api.core.v1.ResourceRequirements</td>
</tr>

<tr>
<td class="org-left">io.k8s.api.core.v1.Container</td>
<td class="org-left">resources.requests</td>
<td class="org-left">integer</td>
<td class="org-left">object</td>
<td class="org-left">io.k8s.api.core.v1.ResourceRequirements</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orga1b2e57" class="outline-3">
<h3 id="orga1b2e57">PodSec - Completely Untested Fields</h3>
<div class="outline-text-3" id="text-orga1b2e57">
<p>
This led us to identifying the following completely untested fields:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 5:</span> Completely Untested Fields in PodSpec</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">podspec_field</th>
<th scope="col" class="org-right">other</th>
<th scope="col" class="org-right">e2e_hit</th>
<th scope="col" class="org-right">conf_hit /  note</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">ephemeralContainers</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">include</td>
</tr>

<tr>
<td class="org-left">topologySpreadConstraints</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">include</td>
</tr>

<tr>
<td class="org-left">overhead</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">alpha</td>
</tr>

<tr>
<td class="org-left">preemptionPolicy</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">alpha</td>
</tr>

<tr>
<td class="org-left">shareProcessNamespace</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-left">beta</td>
</tr>
</tbody>
</table>


<p>
It was noted that some of these fields were alpha/beta, deprecated or hidden behind FeatureGates according to the description in the documentation, so we created new columns for easy of identification.
</p>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 6:</span> Field Path with Extended Columns</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">field_path</th>
<th scope="col" class="org-left">field_kind</th>
<th scope="col" class="org-left">release</th>
<th scope="col" class="org-left">deprecated</th>
<th scope="col" class="org-left">gated</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">overhead</td>
<td class="org-left">integer</td>
<td class="org-left">alpha</td>
<td class="org-left">f</td>
<td class="org-left">t</td>
</tr>

<tr>
<td class="org-left">preemptionPolicy</td>
<td class="org-left">string</td>
<td class="org-left">alpha</td>
<td class="org-left">f</td>
<td class="org-left">t</td>
</tr>

<tr>
<td class="org-left">shareProcessNamespace</td>
<td class="org-left">integer</td>
<td class="org-left">beta</td>
<td class="org-left">f</td>
<td class="org-left">f</td>
</tr>

<tr>
<td class="org-left">runtimeClassName</td>
<td class="org-left">string</td>
<td class="org-left">beta</td>
<td class="org-left">f</td>
<td class="org-left">f</td>
</tr>

<tr>
<td class="org-left">serviceAccount</td>
<td class="org-left">string</td>
<td class="org-left">ga</td>
<td class="org-left">t</td>
<td class="org-left">f</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>

<div id="outline-container-org3370291" class="outline-2">
<h2 id="org3370291">Recommended Actions and Next Steps</h2>
<div class="outline-text-2" id="text-org3370291">
<p>
As we built out these views, we were able to notice areas of improvement, which led us to make the following recommendations.
</p>
</div>
<div id="outline-container-orgb017422" class="outline-3">
<h3 id="orgb017422">Update Conformance Tests to use “serviceAccountName” instead of “serviceAccount”</h3>
<div class="outline-text-3" id="text-orgb017422">
<p>
<code>serviceAccount</code> is deprecated, yet we hit it nearly 200 times during our conformance testing.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 7:</span> Number of Hits on deprecated serviceAccount</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">podspec_field</th>
<th scope="col" class="org-right">other_hits</th>
<th scope="col" class="org-right">e2e_hits</th>
<th scope="col" class="org-right">conf_hits</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">serviceAccount</td>
<td class="org-right">12025</td>
<td class="org-right">1199</td>
<td class="org-right">201</td>
</tr>
</tbody>
</table>

<p>
We should update these tests to use <code>serviceAccountName</code> instead.
</p>
</div>
</div>

<div id="outline-container-org23257aa" class="outline-3">
<h3 id="org23257aa">Prioritize writing test for ephemeralContainers and topologySpreadConstraints</h3>
<div class="outline-text-3" id="text-org23257aa">
<p>
<code>emphemeralContainers</code> and <code>topologySpreadConstraints</code> are the only GA, ungated PodSpec fields that are completely untested.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 8:</span> Number of Hits on GA, Ungated Podspec Fields</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">podspec_field</th>
<th scope="col" class="org-right">other_hits</th>
<th scope="col" class="org-right">e2e_hits</th>
<th scope="col" class="org-right">conf_hits</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">ephemeralContainers</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">topologySpreadConstraints</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">readinessGates</td>
<td class="org-right">0</td>
<td class="org-right">8</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">priorityClassName</td>
<td class="org-right">3731</td>
<td class="org-right">32</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">hostIPC</td>
<td class="org-right">0</td>
<td class="org-right">16</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">hostPID</td>
<td class="org-right">0</td>
<td class="org-right">16</td>
<td class="org-right">0</td>
</tr>
</tbody>
</table>

<p>
We suggest we prioritize writing conformance tests for those two first, then the reamining four fields that don&rsquo;t have a recognizable test.
</p>
</div>
</div>

<div id="outline-container-org833ba25" class="outline-3">
<h3 id="org833ba25">Promote Tests</h3>
<div class="outline-text-3" id="text-org833ba25">
<p>
There are three podSpec fields not hit by any conformance tests.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 9:</span> Podspec Fields not hit by conformance tests</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">podspec_field</th>
<th scope="col" class="org-right">other_hits</th>
<th scope="col" class="org-right">e2e_hits</th>
<th scope="col" class="org-right">conf_hits</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">affinity</td>
<td class="org-right">1213</td>
<td class="org-right">43</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">dnsConfig</td>
<td class="org-right">0</td>
<td class="org-right">16</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">runtimeClassName</td>
<td class="org-right">0</td>
<td class="org-right">36</td>
<td class="org-right">0</td>
</tr>
</tbody>
</table>

<p>
However, these fields <span class="underline">are</span> directly hit by other tests.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 10:</span> Tests that Hit non-conformance-tested Podspec Fields</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">podspec_field</th>
<th scope="col" class="org-left">test</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">affinity</td>
<td class="org-left">[k8s.io] [sig-node] AppArmor load AppArmor profiles can disable an AppArmor profile, using unconfined</td>
</tr>

<tr>
<td class="org-left">affinity</td>
<td class="org-left">[k8s.io] [sig-node] AppArmor load AppArmor profiles should enforce an AppArmor profile</td>
</tr>

<tr>
<td class="org-left">dnsConfig</td>
<td class="org-left">[sig-network] DNS should support configurable pod DNS nameservers</td>
</tr>

<tr>
<td class="org-left">dnsConfig</td>
<td class="org-left">[sig-network] DNS should support configurable pod resolv.conf</td>
</tr>

<tr>
<td class="org-left">runtimeClassName</td>
<td class="org-left">[sig-node] RuntimeClass should reject a Pod requesting a deleted RuntimeClass</td>
</tr>

<tr>
<td class="org-left">runtimeClassName</td>
<td class="org-left">[sig-node] RuntimeClass should reject a Pod requesting a non-existent RuntimeClass</td>
</tr>

<tr>
<td class="org-left">runtimeClassName</td>
<td class="org-left">[sig-node] RuntimeClass should reject a Pod requesting a RuntimeClass with an unconfigured handler</td>
</tr>
</tbody>
</table>

<p>
We recommend looking into and preparing these tests for promotion. 
</p>
</div>
</div>
</div>
</div>
</body>
</html>
